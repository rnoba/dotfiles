backend = "glx";
vsync = true;
use-damage = true;

# shadow = true;
# shadow-radius = 12;
# shadow-opacity = 0.75;
# shadow-offset-x = -15;
# shadow-offset-y = -15;

fading = false;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 5;

corner-radius = 8;

detect-client-opacity = true;
unredir-if-possible = false;
detect-transient = true;
detect-client-leader = true;

# NVIDIA-specific setting
xrender-sync-fence = true;

rules = (
  {
		blur-background = false;
    opacity = 1.0;
  },
  
  {
    match = "focused = true";
    opacity = 1.0;
  },
  
  #################################
  # SHADOW EXCLUSIONS
  #################################
  {
    match = "name = 'Notification'";
    shadow = false;
  },
  {
    match = "class_g = 'Conky'";
    shadow = false;
  },
  {
    match = "class_g ?= 'Notify-osd'";
    shadow = false;
  },
  {
    match = "class_g = 'Cairo-clock'";
    shadow = false;
  },
  {
    match = "class_g = 'slop'";
    shadow = false;
  },
  {
    match = "_GTK_FRAME_EXTENTS@";
    shadow = false;
  },
  {
    match = "window_type = 'dock'";
    shadow = false;
  },
  {
    match = "window_type = 'desktop'";
    shadow = false;
  },
  {
    match = "class_g = 'i3-frame'";
    shadow = false;
  },
  
  #################################
  # BLUR EXCLUSIONS
  #################################
  {
    match = "window_type = 'dock'";
  },
  {
    match = "window_type = 'desktop'";
  },
  {
    match = "class_g = 'slop'";
  },
  {
    match = "_GTK_FRAME_EXTENTS@";
  },
  
  #################################
  # ROUNDED CORNERS EXCLUSIONS
  #################################
  {
    match = "window_type = 'dock'";
    corner-radius = 0;
  },
  {
    match = "window_type = 'desktop'";
    corner-radius = 0;
  },
  {
    match = "class_g = 'i3bar'";
    corner-radius = 0;
  },
  {
    match = "class_g = 'Polybar'";
    corner-radius = 0;
  },
  {
    match = "fullscreen = true";
    corner-radius = 0;
  },
	{
    match = "class_g = 'i3-frame'";
    corner-radius = 0;
  },
  
  #################################
  # APPLICATION-SPECIFIC RULES
  #################################
  {
    match = "class_g = 'firefox' && focused = true";
    opacity = 1.0;
  },
  {
    match = "class_g = 'firefox' && focused = false";
    opacity = 0.95;
  },
  
  {
    match = "class_g = 'Alacritty' && focused = true";
    opacity = 1;
  },
  {
    match = "class_g = 'Alacritty' && focused = false";
    opacity = 0.99;
  },
  
  {
    match = "class_g = 'i3bar'";
    opacity = 1.0;
    corner-radius = 0;
    shadow = false;
  },
  
  {
    match = "class_g = 'dmenu'";
    corner-radius = 0;
  },
  
  {
    match = "class_g = 'mpv' || class_g = 'vlc'";
    opacity = 1.0;
  },
  
  {
    match = "window_type = 'tooltip'";
    fade = true;
    shadow = true;
    opacity = 0.95;
    full-shadow = false;
  },
  
  {
    match = "window_type = 'popup_menu' || window_type = 'dropdown_menu'";
    opacity = 0.95;
    shadow = true;
    fade = true;
  },
  
  {
    match = "window_type = 'dnd'";
    shadow = false;
  },
  
  {
    match = "window_type = 'utility'";
    shadow = false;
  },
  
  #################################
  # FOCUS DETECTION
  #################################
  {
    match = "window_type != 'desktop' && window_type != 'dock'";
    mark-wmwin = true;
  },
  
  {
    match = "!WM_STATE@";
    mark-ovredir-focused = true;
  }
);
